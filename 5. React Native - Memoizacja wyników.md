##  <img width=32 align='top' src='https://www.svgrepo.com/show/288256/brain.svg' /> Memoizacja

Jest to proces optymalizacji wydajno≈õci dziƒôki zapamiƒôtywaniu wynik√≥w dzia≈Ça≈Ñ kodu, takich jak `filterowanie`, `mapowanie`, `skomplikowanie obliczenia`.

Czƒôsto zdarzy siƒô, ≈ºe mamy zbi√≥r danych, kt√≥ry jest ogromnƒÖ tablicƒÖ z dodatkowymi zagnie≈ºd≈ºeniami, kt√≥re sƒÖ obciƒÖ≈ºeniem dla filtrowania czy mapowania w naszej aplikacji.

Wtedy z pomocƒÖ przychodzi nam hook `useMemo`, kt√≥ry w pewien spos√≥b "zapamiƒôta" to co ju≈º raz zosta≈Ço wyliczone/zmapowane/przefiltrowane i odwo≈Ça siƒô do tej pamiƒôci, mo≈ºna powiedzieƒá, ≈ºe jest to forma cache'owania danych.

---

### Zasada dzia≈Çania

Hook `useMemo` funkcjonuje w nastƒôpujƒÖcy spos√≥b:
- [ ] `Pierwszy render`: Wykonanie obliczenia -> zapisanie wyniku w `pamiƒôci podrƒôcznej` -> zapamiƒôtanie warto≈õci z tablicy zale≈ºno≈õci
- [ ] `Kolejny render`: Por√≥wnanie aktualnej warto≈õci tablicy zale≈ºno≈õci z poprzedniƒÖ -> je≈ºeli warto≈õci sƒÖ identyczne ? zwr√≥ƒá zapisany wynik z pamiƒôci : przelicz i zapisz nowy wynik do pamiƒôci.

Mechanizm por√≥wnania funkcjonuje wed≈Çug "p≈Çytkiego" por√≥wnania (`shallow comparison`)
- Dla prymitywnych danych (np. integer): por√≥wnuje warto≈õci
- Dla obiekt√≥w: por√≥wnuje ich referencje

### <img src='https://www.svgrepo.com/show/312339/hook.svg' height=32 align='top'> Hook `useMemo`
Zapis i wykorzystanie tego hooka przypomina nieco wykorzystanie `useEffect`, ze wzglƒôdu na zaistnia≈ÇƒÖ `tablicƒô zale≈ºno≈õci`.
Natomiast nowo≈õciƒÖ jest fakt, ≈ºe hook ten zwraca nam to co w nim zostanie wykonane, wiƒôc nale≈ºy go zapisaƒá do zmiennej.
```jsx
const expensiveAsHell = useMemo(() => {
  return array.filter(item => complexCondition(item));
}, [array]); // Przelicz tylko przy zmianie array
```

Powy≈ºszy przyk≈Çad jest co≈õ abstrakcyjny bez uwzglƒôdnionego kontekstu aplikacji, dlatego oto jest nieco lepszy
```jsx
export const Statistics = ({ users }) => {
  const userAnalytics = useMemo(() => {
    return {
      totalAge: users.reduce((sum, user) => sum + user.age, 0),
      averageAge: users.reduce((sum, user) => sum + user.age, 0) / users.length,
      activeUsers: users.filter(user => user.isActive).length,
      seniorUsers: users.filter(user => user.age > 50).length
    };
  }, [users]); // Przelicz tylko przy zmianie u≈ºytkownik√≥w
  
  return (
    <View>
      <Text>≈öredni wiek: {userAnalytics.averageAge}</Text>
      <Text>Aktywni u≈ºytkownicy: {userAnalytics.activeUsers}</Text>
    </View>
  );
}
```
Gdzie przyk≈Çadowy zbi√≥r danych "users" jest nastƒôpujƒÖcy:
```jsx
const users = [
  {
    id: 1,
    name: "Anna Kowalska",
    age: 28,
    isActive: true
  },
  {
    id: 2,
    name: "Jan Nowak",
    age: 55,
    isActive: false
  },
  {
    id: 3,
    name: "Maria Wi≈õniewska",
    age: 34,
    isActive: true
  },
  {
    id: 4,
    name: "Piotr Zieli≈Ñski",
    age: 62,
    isActive: true
  },
  {
    id: 5,
    name: "Katarzyna DƒÖbrowska",
    age: 41,
    isActive: false
  },
  {
    id: 6,
    name: "Tomasz Lewandowski",
    age: 52,
    isActive: true
  }
]
```

### Kiedy **$${\color{red}NIE}$$** stosowaƒá 
Wa≈ºne pytanie musi w ko≈Ñcu zapa≈õƒá "ale kiedy zatem nie stosowaƒá useMemo skoro optymalizuje nasz kod?".
Tak jak wcze≈õniej zosta≈Ço napisane, useMemo zapamiƒôtuje wynik operacji, czyli gdzie≈õ w lokalnej pamiƒôci zostaje zapisany wynik danej operacji, co bƒôdzie skutkowa≈Ço `kosztem pamiƒôci` aplikacji.
Oto kilka przyk≈Çad√≥w kiedy `stosowaƒá ‚úÖ` i kiedy `NIE stosowaƒá ‚ùå`:

- Proste obliczenia
```jsx
// ‚ùå DON'T DO THIS
const simpleCalculation = useMemo(() => {
  return price * quantity;
}, [price, quantity]);

// ‚úÖ DO THIS
const simpleCalculation = price * quantity;
```

- Ma≈Çe zbiory danych
```jsx
// ‚ùå Przesadna optymalizacja
const shortList = useMemo(() => {
  return items.filter(item => item.isVisible);
}, [items]); // gdy items to ma≈Ça tablica

// ‚úÖ Ta≈Ñsze rozwiƒÖzanie
const shortList = items.filter(item => item.isVisible);
```

- PotrzebujƒÖc efekt√≥w ubocznych
```jsx
// ‚ùå Z≈Çe u≈ºycie
const data = useMemo(() => {
  fetchDataFromAPI(); // efekt uboczny
  return processData();
}, []);

// ‚úÖ Poprawne rozwiƒÖzanie
useEffect(() => {
  fetchDataFromAPI();
}, []);
```

- PotrzebujƒÖc referencji do funkcji (o useCallback bƒôdzie nied≈Çugo)
```jsx
// ‚ùå Niew≈Ça≈õciwe u≈ºycie
const handleClick = useMemo(() => {
  return () => console.log('clicked');
}, []);

// ‚úÖ Lepsze rozwiƒÖzanie
const handleClick = useCallback(() => {
  console.log('clicked');
}, []);
```

### üå† Zadania do wykonania

1. Stw√≥rz komponent, kt√≥ry przyjmuje zbi√≥r produkt√≥w, a nastƒôpnie wylicza cenƒô ca≈ÇkowitƒÖ tego zam√≥wienia
- <details> 
  <summary>Zbi√≥r produkt√≥w do skopiowania tutaj <-</summary>
  
  ```jsx
  const products = [
   { id: 1, name: "Laptop", price: 2000, quantity: 1 },
   { id: 2, name: "Smartfon", price: 1000, quantity: 2 },
   { id: 3, name: "Tablet", price: 1500, quantity: 3 },
  ];
  ```
  
  </details>
2. Stw√≥rz komponent, kt√≥ry przyjmuje zbi√≥r u≈ºytkownik√≥w, a nastƒôpnie filtrtuje u≈ºytkownik√≥w pe≈Çnoletnich i wy≈õwietla ich ilo≈õƒá oraz ≈õredni wiek.
- <details> 
  <summary>Zbi√≥r u≈ºytkownik√≥w do skopiowania tutaj <-</summary>
  
  ```jsx
  const users = [
    { name: "Jan Kowalski", age: 25, city: "Warszawa", isActive: true },
    { name: "Anna Nowak", age: 30, city: "Krak√≥w", isActive: false },
    { name: "Piotr Wi≈õniewski", age: 2, city: "Gda≈Ñsk", isActive: true },
    { name: "Magdalena DƒÖbrowska", age: 35, city: "Wroc≈Çaw", isActive: true },
    { name: "Tomasz Lewandowski", age: 3, city: "Pozna≈Ñ", isActive: false },
    { name: "Katarzyna Zieli≈Ñska", age: 22, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Micha≈Ç Szyma≈Ñski", age: 40, city: "Lublin", isActive: true },
    { name: "Agnieszka B≈Çaszczyk", age: 33, city: "Katowice", isActive: false },
    { name: "Robert Majewski", age: 10, city: "Szczecin", isActive: true },
    { name: "Alicja Jankowska", age: 27, city: "Bydgoszcz", isActive: true },
    { name: "Marcin Kwiatkowski", age: 32, city: "Bia≈Çystok", isActive: false },
    { name: "Monika Grabowska", age: 26, city: "Gdynia", isActive: true },
    { name: "Krzysztof Nowicki", age: 38, city: "Katowice", isActive: true },
    { name: "Joanna Adamczyk", age: 29, city: "Wroc≈Çaw", isActive: false },
    { name: "Grzegorz Piotrowski", age: 41, city: "Lublin", isActive: true },
    { name: "Barbara Michalska", age: 36, city: "Pozna≈Ñ", isActive: true },
    { name: "Adam Kaczmarczyk", age: 24, city: "Warszawa", isActive: false },
    { name: "El≈ºbieta Kowalczyk", age: 47, city: "Krak√≥w", isActive: true },
    { name: "Rafa≈Ç Mazur", age: 31, city: "Gda≈Ñsk", isActive: true },
    { name: "Dorota Wojciechowska", age: 34, city: "Szczecin", isActive: false },
    { name: "Konrad Janicki", age: 37, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Patrycja Lewandowska", age: 23, city: "Bydgoszcz", isActive: true },
    { name: "≈Åukasz Zalewski", age: 42, city: "Wroc≈Çaw", isActive: false },
    { name: "Natalia Krawczyk", age: 28, city: "Katowice", isActive: true },
    { name: "Dawid Kowalewski", age: 13, city: "Lublin", isActive: true },
    { name: "Ewelina Kami≈Ñska", age: 26, city: "Gda≈Ñsk", isActive: false },
    { name: "Sebastian ZajƒÖc", age: 33, city: "Warszawa", isActive: true },
    { name: "Justyna Wo≈∫niak", age: 30, city: "Pozna≈Ñ", isActive: true },
    { name: "Marek G√≥rski", age: 44, city: "Krak√≥w", isActive: false },
    { name: "Karolina Dudek", age: 7, city: "Szczecin", isActive: true },
    { name: "Jacek Pawlak", age: 36, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Aleksandra G√≥recka", age: 25, city: "Bydgoszcz", isActive: false },
    { name: "Pawe≈Ç Rutkowski", age: 41, city: "Gdynia", isActive: true },
    { name: "Izabela Koz≈Çowska", age: 29, city: "Wroc≈Çaw", isActive: true },
    { name: "Szymon Marek", age: 35, city: "Katowice", isActive: false },
    { name: "Marta Kowalska", age: 32, city: "Lublin", isActive: true },
    { name: "Wojciech Nowak", age: 38, city: "Pozna≈Ñ", isActive: true },
    { name: "Dominika Mazurek", age: 24, city: "Warszawa", isActive: false },
    { name: "Artur Janowski", age: 43, city: "Krak√≥w", isActive: true },
    { name: "Weronika Sikora", age: 31, city: "Gda≈Ñsk", isActive: true },
    { name: "Daniel Pawelec", age: 37, city: "Szczecin", isActive: false },
    { name: "Kinga Kowalczyk", age: 26, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Maciej Sikora", age: 40, city: "Bydgoszcz", isActive: true },
    { name: "Sylwia Zawadzka", age: 28, city: "Wroc≈Çaw", isActive: false },
    { name: "Marcin Gutowski", age: 33, city: "Katowice", isActive: true },
    { name: "Renata Jab≈Ço≈Ñska", age: 39, city: "Lublin", isActive: true },
    { name: "Damian Kaczmar", age: 25, city: "Pozna≈Ñ", isActive: false },
    { name: "Angelika Mazur", age: 34, city: "Warszawa", isActive: true },
    { name: "Adrian Nowicki", age: 15, city: "Gda≈Ñsk", isActive: true },
    { name: "Kamila Lisowska", age: 30, city: "Krak√≥w", isActive: false },
    { name: "Dariusz Michalski", age: 16, city: "Szczecin", isActive: true },
    { name: "Martyna Grabowska", age: 27, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Jaros≈Çaw Wr√≥blewski", age: 45, city: "Bydgoszcz", isActive: false },
    { name: "≈ªaneta Sikora", age: 20, city: "Wroc≈Çaw", isActive: true },
    { name: "Rados≈Çaw Kozio≈Ç", age: 41, city: "Katowice", isActive: true },
    { name: "Edyta Marek", age: 32, city: "Lublin", isActive: false },
    { name: "Mateusz Paw≈Çowski", age: 38, city: "Pozna≈Ñ", isActive: true },
    { name: "Paulina Jankowska", age: 26, city: "Warszawa", isActive: true },
    { name: "Mariusz Kowalczyk", age: 43, city: "Gda≈Ñsk", isActive: false },
    { name: "Justyna Adamska", age: 31, city: "Krak√≥w", isActive: true },
    { name: "Bartosz Mazurek", age: 37, city: "Szczecin", isActive: true },
    { name: "Anna Wojciechowska", age: 28, city: "≈Å√≥d≈∫", isActive: false },
    { name: "Kamil Lewicki", age: 40, city: "Bydgoszcz", isActive: true },
    { name: "Dominika Skolimowska", age: 24, city: "Lublin", isActive: true },
    { name: "Micha≈Ç Nowak", age: 25, city: "Katowice", isActive: false },
    { name: "Klaudia Zieli≈Ñska", age: 9, city: "Lublin", isActive: true },
    { name: "Piotr Mazur", age: 34, city: "Pozna≈Ñ", isActive: true },
    { name: "Agata Jankowska", age: 30, city: "Warszawa", isActive: false },
    { name: "Rafa≈Ç Krawczyk", age: 12, city: "Gda≈Ñsk", isActive: true },
    { name: "Monika Dudek", age: 27, city: "Krak√≥w", isActive: true },
    { name: "Tomasz Wojciechowski", age: 36, city: "Szczecin", isActive: false },
    { name: "Katarzyna Kowalczyk", age: 31, city: "≈Å√≥d≈∫", isActive: true },
    { name: "≈Åukasz Nowicki", age: 4, city: "Bydgoszcz", isActive: true },
    { name: "Natalia Mazurek", age: 29, city: "Wroc≈Çaw", isActive: false },
    { name: "Adam Jankowski", age: 38, city: "Katowice", isActive: true },
    { name: "Barbara Sikora", age: 32, city: "Lublin", isActive: true },
    { name: "Krzysztof Lewandowski", age: 26, city: "Pozna≈Ñ", isActive: false },
    { name: "Weronika Kowalska", age: 17, city: "Warszawa", isActive: true },
    { name: "Szymon Nowak", age: 35, city: "Gda≈Ñsk", isActive: true },
    { name: "Aleksandra Zieli≈Ñska", age: 30, city: "Krak√≥w", isActive: false },
    { name: "Marcin Paw≈Çowski", age: 43, city: "Szczecin", isActive: true },
    { name: "Patrycja Mazur", age: 28, city: "≈Å√≥d≈∫", isActive: true },
    { name: "Daniel Kaczmarczyk", age: 7, city: "Bydgoszcz", isActive: false },
    { name: "Ewelina Kowalczyk", age: 33, city: "Wroc≈Çaw", isActive: true },
    { name: "Grzegorz Nowicki", age: 13, city: "Katowice", isActive: true },
    { name: "Joanna Lewandowska", age: 25, city: "Lublin", isActive: false },
    { name: "Marek Janicki", age: 9, city: "Pozna≈Ñ", isActive: true },
    { name: "Julia Wojciechowska", age: 34, city: "Warszawa", isActive: true }
  ];
  ```
  
  </details>
3. Stw√≥rz przycisk zliczajƒÖcy klikniƒôcia.
4. Stw√≥rz komponent, kt√≥ry wy≈õwietla datƒô w sformatowanych trzech zapisach: `polski`, `ameryka≈Ñski`, `chinski`.
5. Stw√≥rz kompontent timera, kt√≥ry bƒôdzie formatowa≈Ç odpowiednio czas (`mm:ss`) oraz aktualizowa≈Ç oczywi≈õcie czas co sekundƒô. Czas mo≈ºe byƒá zatrzymywany i wznawiany, dodatkowo mogƒÖ byƒá zapisywane miƒôdzyczasy.
